<h1>Ajouter une personne</h1>
<!-- en cas de submit, on utilise la fonction traiterFormulaire qui 
  utilise f comme donnee d'entrer-->
<form #f="ngForm" (submit)="traiterFormulaire(f)">
  <div>
    <label for="nom">Nom</label> <br>
    <input type="text" name="nom" ngModel #champNom="ngModel" required minlength="2" maxlength="50">
  </div>

  <!--affiche une alerte -->
  <div class="alert">
    <!--si le champNom est incorrect et que le champ n'est pas vide ou a été modifié-->
    <div *ngIf="champNom.invalid && (champNom.dirty || champNom.touched)">
      le nom est incorrect.</div>
    <div *ngIf="champNom.errors?.['required']">Le nom est obligatoire</div>
    <div *ngIf="champNom.errors?.['minlength']">Le nom doit comporter au moins 2 caractères</div>
  </div>

  <div>
    <label for="prenom">prenom</label> <br>
    <input type="text" name="prenom" ngModel>
  </div>

  <div>
    <label for="telephone">telephone</label> <br>
    <input type="text" name="telephone" ngModel #champTel="ngModel" required
      pattern="^\d{2}\s\d{2}\s\d{2}\s\d{2}\s\d{2}$">
  </div>
  
  <div class="alert">
    <!--si le champTel est invalide, non toucher, on affiche l'erreur-->
    <div *ngIf="champTel.invalid && (champTel.dirty || champTel.touched)">
      Le telephone doit etre sous la forme XX XX XX XX XX
    </div>
    <div *ngIf="champTel.errors?.['required']">Le telephone est obligatoire</div>

  </div>

  <!--le bouton est invisible tant que formulaire est invalide-->
  <button type="submit" [hidden]="f.invalid">Ajouter</button>

</form>
